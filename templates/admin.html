{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å</h2>
    <span class="badge bg-danger">–†–µ–∂–∏–º: –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä</span>
</div>

<div class="row">
    <div class="col-md-4 mb-4">
        <div class="card shadow-sm">
            <div class="card-header bg-success text-white">‚ûï –î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä</div>
            <div class="card-body">
                <form method="POST" action="/admin/add_product">
                    <div class="mb-2">
                        <label class="small">–ù–∞–∑–≤–∞ –ª–æ–∫—à–∏–Ω–∏</label>
                        <input type="text" name="name" class="form-control" placeholder="–ù–∞–ø—Ä: –¢–æ–º –Ø–º" required>
                    </div>
                    <div class="mb-2">
                        <label class="small">–¶—ñ–Ω–∞ (–≥—Ä–Ω)</label>
                        <input type="number" name="price" class="form-control" placeholder="150" required>
                    </div>
                    <div class="mb-3">
                        <label class="small">–ï–º–æ–¥–∑—ñ (—ñ–∫–æ–Ω–∫–∞)</label>
                        <input type="text" name="img" class="form-control" placeholder="üç§">
                    </div>
                    <button type="submit" class="btn btn-success w-100">–°—Ç–≤–æ—Ä–∏—Ç–∏</button>
                </form>
            </div>
        </div>
    </div>

    <div class="col-md-8">
        <div class="card shadow-sm">
            <div class="card-header bg-dark text-white">üì¶ –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∞—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–º</div>
            <div class="card-body p-0">
                <table class="table table-hover align-middle m-0">
                    <thead class="table-light">
                        <tr>
                            <th>–Ü–∫–æ–Ω–∫–∞</th>
                            <th>–ù–∞–∑–≤–∞ —Ç–∞ –¶—ñ–Ω–∞</th>
                            <th>–î—ñ—ó</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for p in products %}
                        <tr>
                            <form method="POST" action="/admin/edit_product/{{ p.id }}">
                                <td style="font-size: 1.5rem;">{{ p.img }}</td>
                                <td>
                                    <input type="text" name="name" value="{{ p.name }}" class="form-control form-control-sm mb-1">
                                    <input type="number" name="price" value="{{ p.price }}" class="form-control form-control-sm">
                                </td>
                                <td>
                                    <div class="d-flex gap-1">
                                        <button type="submit" class="btn btn-primary btn-sm">üíæ</button>
                                        <a href="/admin/delete_product/{{ p.id }}" class="btn btn-outline-danger btn-sm" onclick="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏?')">üóëÔ∏è</a>
                                    </div>
                                </td>
                            </form>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">üìú –û—Å—Ç–∞–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</div>
            <div class="card-body">
                <table class="table table-sm">
                    <thead><tr><th>ID</th><th>–ö–ª—ñ—î–Ω—Ç</th><th>–°—É–º–∞</th><th>–°—Ç–∞—Ç—É—Å</th></tr></thead>
                    <tbody>
                        {% for o in orders %}
                        <tr>
                            <td>#{{ o.id }}</td>
                            <td>{{ o.user_email }}</td>
                            <td>{{ o.total }} –≥—Ä–Ω</td>
                            <td><span class="badge bg-info">{{ o.status }}</span></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}
